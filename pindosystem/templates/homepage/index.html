<!doctype html>

{% extends "../layout/base.html" %}
{% load static %}

{% block content %}

  {% block header %}

  {% include "../element/header.html" %}

  {% endblock %}

  <link rel="stylesheet" href="{% static 'css/gis/gis.css' %}" />

  <div class="page-wrapper">

    {% block main_content %}


    
                
      <div id="map-app-container">
        <div class="position-fixed" id="toc-section" style="display: block; width: 350px; height: 100%;">
          <div id="title-container">

            <div>
              <h1 class="text-blue title-content-section">Capas disponibles: rodales, catastro, límites</h1>
            </div>
          
            <div>
              <h2 class="h2-content-section bg-blue text-blue-fg">RODALES DISPONIBLES</h2>
            </div>
          </div>

          <div class="hr-text" style="margin: unset;"></div>

          <div class="my-2 my-md-0 flex-grow-1 flex-md-grow-0 order-first order-md-last">
          
              <div class="input-icon">
                <span class="input-icon-addon">
                  <!-- Download SVG icon from http://tabler-icons.io/i/search -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg>
                </span>
                <input type="text" value="" id="input-buscar-rodal" onkeyup="filterRodalesTOC(this)" class="form-control" placeholder="Filtrar..." aria-label="Buscar Rodal">
              </div>
  
          </div>

          <div class="hr mb-2 mt-2"></div>
          <div>
            <div class="accordion" id="accordion-example">
              <div class="accordion-item">
                <h2 class="accordion-header bg-dark-lt" id="heading-1">

                  <a class="dropdown-item" href="#collapse-1" data-bs-toggle="collapse" data-bs-target="#collapse-1" aria-expanded="true">
                    <div class="text-item-content p-1">Rodales</div>
                    <div class="number-item-content bg-vk p-1">
                      12
                    </div>
                    
                  </a>
                </h2>
                <div id="collapse-1" class="accordion-collapse collapse show" data-bs-parent="#accordion-example" style="">
                  <div class="">
                    <div class="list-group list-group-flush" id="list-rodales">

                      {% for rodal in rodales %}

                        <a class="list-group-item list-group-item-action item-layer" aria-current="true" attr="{{rodal.cod_sap}}">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chart-treemap" width="24" height="24" 
                          viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" />
                          <path d="M12 4v16" />
                            <path d="M4 15h8" /><path d="M12 12h8" /><path d="M16 12v8" /><path d="M16 16h4" /></svg>
                          {{rodal.cod_sap}}
                        </a>

                      {% endfor %}
                     
                     <!---- <a href="#" class="list-group-item list-group-item-action">A second link item</a> -->
                     
                  
                    </div>
                  </div>
                </div>
              </div>


              <div class="hr mt-4 mb-4"></div>
              <div class="accordion-item">
                <h2 class="accordion-header bg-dark-lt" id="heading-2">

                  <a class="dropdown-item" href="#collapse-2" data-bs-toggle="collapse" data-bs-target="#collapse-2" aria-expanded="true">
                    <div class="text-item-content p-1">OTRAS CAPAS</div>
                    <div class="number-item-content bg-vk p-1">
                      12
                    </div>
                    
                  </a>
                </h2>
                <div id="collapse-2" class="accordion-collapse collapse show" data-bs-parent="#accordion-example" style="">
                  <div class="">
                    <div class="list-group list-group-flush">
                      <a href="#" class="list-group-item list-group-item-action active" aria-current="true">
                        The current link item
                      </a>
                      <a href="#" class="list-group-item list-group-item-action">A second link item</a>
                      <a href="#" class="list-group-item list-group-item-action">A third link item</a>
                      <a href="#" class="list-group-item list-group-item-action">A fourth link item</a>
                  
                    </div>
                  </div>
                </div>
              </div>


            </div>
          </div>
        </div>

        <div id="map-report-container" style="display: flex; margin-left: 350px; height: 100%;">
          <div class="bg-dark-lt" id="tab-icon-container">
            <div style="display: flex; flex: 0.22; flex-direction: row; justify-content: space-between; align-items: center;">
              <ul class="nav nav-tabs card-header-tabs bg-azure-lt" data-bs-toggle="tabs" style="justify-content: space-between; align-items: center;">
                <li class="nav-item">
                <a href="#tabs-map" class="btn btn-vk active" data-bs-toggle="tab">
                  <!-- Download SVG icon from http://tabler-icons.io/i/brand-vk -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-map" width="24" height="24" viewBox="0 0 24 24" 
                  stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13" />
                    <path d="M9 4v13" /><path d="M15 7v13" /></svg>
                     Mapa
                </a>
                </li>
                <li class="nav-item">
                <a href="#tabs-costos" class="btn btn-vk" data-bs-toggle="tab">
                  <!-- Download SVG icon from http://tabler-icons.io/i/brand-vk -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 19h-4a8 8 0 0 1 -8 -8v-5h4v5a4 4 0 0 0 4 4h0v-9h4v4.5l.03 0a4.531 4.531 0 0 0 3.97 -4.496h4l-.342 1.711a6.858 6.858 0 0 1 -3.658 4.789h0a5.34 5.34 0 0 1 3.566 4.111l.434 2.389h0h-4a4.531 4.531 0 0 0 -3.97 -4.496v4.5z"></path></svg>
                  Costos
                </a>
                </li>
    
                <li class="nav-item">
                <a href="#tabs-planificacion" class="btn btn-vk" data-bs-toggle="tab">
                  <!-- Download SVG icon from http://tabler-icons.io/i/brand-vk -->
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M14 19h-4a8 8 0 0 1 -8 -8v-5h4v5a4 4 0 0 0 4 4h0v-9h4v4.5l.03 0a4.531 4.531 0 0 0 3.97 -4.496h4l-.342 1.711a6.858 6.858 0 0 1 -3.658 4.789h0a5.34 5.34 0 0 1 3.566 4.111l.434 2.389h0h-4a4.531 4.531 0 0 0 -3.97 -4.496v4.5z"></path></svg>
                  Planificación
                </a>
                </li>
              </ul>
  

            </div>
          </div>

 
            <div id="tab-container" style="display: flex; flex: 1;">
              
                
              <div class="tab-content" style="flex: 1;">
                <div class="tab-pane active show" id="tabs-map" style="background-color: red; height: 100%;">

                

                      <div id="map" style="width: 100%; height: 100%;"></div>
      
                </div>
              

                <div class="tab-pane" id="tabs-costos"  style="background-color: red; height: 100%;">
                  <h4>Intervenciones</h4>
                  <div>Donec ac vitae diam amet vel leo egestas consequat rhoncus in luctus amet, facilisi sit mauris accumsan nibh habitant senectus</div>
                </div>

                <div class="tab-pane" id="tabs-planificacion">
                  <div id="div" style="position: absolute;">

                  
                    <h1 class="text-center text-blue mt-3">Planificación de Intervenciones</h1>
                    <div style="width: 100%; position:relative;" id="prueba">
                      <div style="max-height: 75vh; overflow-y: auto !important;" id="gantt"></div>
                    </div>
                </div>
              
                </div>
              

              </div>
 

            </div>
        </div>
      </div>

      <script src="{% static 'js/gis/homepage/gis_configuration.js' %}"></script>
      <script src="{% static 'js/gis/homepage/gis.js' %}"></script>

      <script src="{% static 'js/gantt/timelines-chart.min.js' %}"></script>
      <script src="{% static 'js/d3/d3.js' %}"></script>
      <script src="{% static 'js/planificacion/planificacion.js' %}"></script>

      
      
    {% endblock main_content %}

    
      <script>

        let map_config_json = "{{map_config|escapejs}}";
        let map_config = JSON.parse(map_config_json != '' ? map_config_json : null);

        initGis(map_config);
      
      </script>

      <script>

        let rodales_serializer = "{{rodales_serializer|escapejs}}";
        let rodales_serializer_json = JSON.parse(rodales_serializer != '' ? rodales_serializer : null);

        console.log(rodales_serializer_json)

       
      
      </script>

      <script>
        let categorias_inter = JSON.parse("{{categorias_intervencion|escapejs}}");
        let eventos_planificacion = JSON.parse("{{eventos_planificacion|escapejs}}");
       
        initGanttGeneral(categorias_inter, eventos_planificacion, 'tab-container');


      </script>


  </div>



{% endblock  %}


